<div class="topic-block">
    <div class="topic-label">
        <label for="title">主题:</label>
        <input type="text" name="title" value="" id="title">
    </div>
    <div class="topic-label">
        <label for="content">内容:</label>
        <textarea name="content" rows="5" cols="25" id="content"></textarea>
    </div>
    <div class="topic-label">
        <label for="category">分类:</label>
        <select class="category" name="category" id="category">
            <% categorys.forEach(function (category) {%>
                    <option value="<%= category.name%>"><%= category.name%></option>
            <%})%>
        </select>
    </div>
    <div class="topic-button">
        <button type="button">提交</button>
    </div>
    <script type="text/javascript">
        $('button').click(function () {
            var title = $('#title').val();
            var content = $('#content').val();
            var author = $('a.username').text();
            var categoryName = $('select').val();

            $.ajax({
                url: '/newTopic',
                type: 'POST',
                data: {
                    "author": author,
                    "title": title,
                    "content": content,
                    "categoryName": categoryName
                },
                success: function (data) {
                    if (data.result = 1) {
                        window.location = '/';
                    }
                }
            })
        })
    </script>
</div>
